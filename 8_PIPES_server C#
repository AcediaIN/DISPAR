using System;
using System.IO.Pipes;
using System.Text;
using System.Diagnostics;

class ServerProgram
{
    static void Main()
    {
        const string pipeName = "myPipe";
        const int bufferSize = 4096;
        byte[] sendData = Encoding.UTF8.GetBytes("Hello from server!");

        var server = new NamedPipeServerStream(pipeName);
        server.WaitForConnection();

        var stopwatch = Stopwatch.StartNew();

        server.Write(sendData, 0, sendData.Length);

        stopwatch.Stop();

        double transferSpeed = (sendData.Length ) / (double)stopwatch.ElapsedMilliseconds;
        transferSpeed = transferSpeed * 1000;
        Console.WriteLine("Transfer speed: " + transferSpeed.ToString("0.00") + " MB/s");

        server.Dispose();
    }
}
